<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employment Verification Form</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for Inter font and general body look */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Light gray background */
        }
        /* Custom styling for the form input fields and focus state */
        .form-input {
            @apply w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-150;
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <!-- MAIN FORM CONTAINER -->
    <div id="main-content" class="max-w-4xl mx-auto bg-white shadow-2xl rounded-xl p-6 md:p-10 lg:p-12">
        
        <!-- Header Section -->
        <header class="mb-8 border-b pb-4 border-indigo-200">
            <h1 class="text-4xl font-extrabold text-indigo-700 mb-2">Employment Verification Form</h1>
            <p class="text-sm text-gray-500 mb-4 italic">The application must be fully completed to be considered. Please complete each section.</p>
            <div class="p-3 bg-indigo-50 rounded-lg text-indigo-800 text-sm font-medium">
                We are an Equal Opportunity Employer and committed to excellence through diversity.
            </div>
        </header>

        <!-- Form Start -->
        <form id="employmentForm">

            <!-- Personal Information Section -->
            <section class="mb-10 p-6 bg-gray-50 rounded-xl shadow-inner">
                <h2 class="text-2xl font-semibold text-gray-800 border-b pb-2 mb-4 border-gray-300">Personal Information</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="col-span-full">
                        <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Name</label>
                        <input type="text" id="name" name="name" class="form-input" required>
                    </div>

                    <div class="col-span-full">
                        <label for="address" class="block text-sm font-medium text-gray-700 mb-1">Address</label>
                        <input type="text" id="address" name="address" class="form-input" required>
                    </div>
                    
                    <div>
                        <label for="city" class="block text-sm font-medium text-gray-700 mb-1">City</label>
                        <input type="text" id="city" name="city" class="form-input" required>
                    </div>
                    <div>
                        <label for="state" class="block text-sm font-medium text-gray-700 mb-1">State</label>
                        <input type="text" id="state" name="state" class="form-input" required>
                    </div>
                    <div>
                        <label for="zip" class="block text-sm font-medium text-gray-700 mb-1">Zip</label>
                        <input type="text" id="zip" name="zip" class="form-input" required>
                    </div>

                    <div>
                        <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone number</label>
                        <input type="tel" id="phone" name="phone" class="form-input" required>
                    </div>
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email address</label>
                        <input type="email" id="email" name="email" class="form-input" required>
                    </div>
                    <div>
                        <label for="dob" class="block text-sm font-medium text-gray-700 mb-1">D.O.B</label>
                        <input type="date" id="dob" name="dob" class="form-input" required>
                    </div>
                </div>

                <!-- Yes/No Questions (Only eligible to work and veteran questions remain here) -->
                <div class="mt-6 space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Are you legally eligible to work in the US?</label>
                        <div class="flex space-x-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="eligible_to_work" value="Yes" class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500" required>
                                <span class="ml-2 text-gray-700">Yes</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="eligible_to_work" value="No" class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500">
                                <span class="ml-2 text-gray-700">No</span>
                            </label>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Are you a veteran?</label>
                        <div class="flex space-x-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="veteran" value="Yes" class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500" required>
                                <span class="ml-2 text-gray-700">Yes</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="veteran" value="No" class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500">
                                <span class="ml-2 text-gray-700">No</span>
                            </label>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- NEW: Background Check Section -->
            <section class="mb-10 p-6 bg-gray-50 rounded-xl shadow-inner">
                <h2 class="text-2xl font-semibold text-gray-800 border-b pb-2 mb-4 border-gray-300">Background Check Consent</h2>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">If selected for employment, are you willing to submit to a background check?</label>
                    <div class="flex space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="background_check" value="Yes" class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500" required>
                            <span class="ml-2 text-gray-700">Yes</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="background_check" value="No" class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500">
                            <span class="ml-2 text-gray-700">No</span>
                        </label>
                    </div>
                </div>
            </section>

            <!-- Position Section -->
            <section class="mb-10 p-6 bg-gray-50 rounded-xl shadow-inner">
                <h2 class="text-2xl font-semibold text-gray-800 border-b pb-2 mb-4 border-gray-300">Position</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div>
                        <label for="position" class="block text-sm font-medium text-gray-700 mb-1">Position you are applying for</label>
                        <input type="text" id="position" name="position" class="form-input" required>
                    </div>
                    <!-- Removed "Available start date" field entirely -->
                    <div>
                        <label for="desired_pay" class="block text-sm font-medium text-gray-700 mb-1">Desired pay (e.g., $15/hr or $60,000/yr)</label>
                        <input type="text" id="desired_pay" name="desired_pay" class="form-input" required>
                    </div>
                </div>
                
                <div class="mt-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Employment desired</label>
                    <div class="flex flex-wrap gap-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="employment_desired" value="Full time" class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500" required>
                            <span class="ml-2 text-gray-700">Full time</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="employment_desired" value="Part time" class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500">
                            <span class="ml-2 text-gray-700">Part time</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="employment_desired" value="Seasonal/Temporary" class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500">
                            <span class="ml-2 text-gray-700">Seasonal/Temporary</span>
                        </label>
                    </div>
                </div>
            </section>

            <!-- Education Section -->
            <section class="mb-10 p-6 bg-gray-50 rounded-xl shadow-inner">
                <h2 class="text-2xl font-semibold text-gray-800 border-b pb-2 mb-4 border-gray-300">Education</h2>
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white rounded-lg border border-gray-200">
                        <thead>
                            <tr class="bg-indigo-100 text-indigo-800 text-left text-sm font-medium">
                                <th class="p-3">School Name</th>
                                <th class="p-3">Location</th>
                                <th class="p-3">Years Attended</th>
                                <th class="p-3">Degree Received</th>
                                <th class="p-3">Major</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Row 1 -->
                            <tr>
                                <td class="p-3 border-t"><input type="text" name="edu_school_1" class="form-input border-0 p-1"></td>
                                <td class="p-3 border-t"><input type="text" name="edu_location_1" class="form-input border-0 p-1"></td>
                                <td class="p-3 border-t"><input type="text" name="edu_years_1" class="form-input border-0 p-1"></td>
                                <td class="p-3 border-t"><input type="text" name="edu_degree_1" class="form-input border-0 p-1"></td>
                                <td class="p-3 border-t"><input type="text" name="edu_major_1" class="form-input border-0 p-1"></td>
                            </tr>
                            <!-- Row 2 -->
                            <tr>
                                <td class="p-3 border-t"><input type="text" name="edu_school_2" class="form-input border-0 p-1"></td>
                                <td class="p-3 border-t"><input type="text" name="edu_location_2" class="form-input border-0 p-1"></td>
                                <td class="p-3 border-t"><input type="text" name="edu_years_2" class="form-input border-0 p-1"></td>
                                <td class="p-3 border-t"><input type="text" name="edu_degree_2" class="form-input border-0 p-1"></td>
                                <td class="p-3 border-t"><input type="text" name="edu_major_2" class="form-input border-0 p-1"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Employment History Section -->
            <section class="mb-10 p-6 bg-gray-50 rounded-xl shadow-inner">
                <h2 class="text-2xl font-semibold text-gray-800 border-b pb-2 mb-4 border-gray-300">Employment History</h2>
                
                <div id="employment-history-container" class="space-y-8">
                    <!-- Employment Block Template (2 blocks total) -->
                </div>
                
                <template id="employment-block-template">
                    <div class="employment-block p-4 border border-gray-200 rounded-lg bg-white shadow-sm">
                        <h3 class="text-lg font-medium text-indigo-600 mb-3">Employer [NUMBER]</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="md:col-span-1">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Employer</label>
                                <input type="text" name="employer_name" class="form-input" required>
                            </div>
                            <div class="md:col-span-1">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Job title</label>
                                <input type="text" name="job_title" class="form-input" required>
                            </div>
                            <div class="md:col-span-1">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Dates employed</label>
                                <input type="text" name="dates_employed" placeholder="MM/YYYY - MM/YYYY" class="form-input" required>
                            </div>
                            <div class="md:col-span-1">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Work phone</label>
                                <input type="tel" name="work_phone" class="form-input">
                            </div>
                            <div class="md:col-span-1">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Starting pay rate</label>
                                <input type="text" name="starting_pay" class="form-input">
                            </div>
                            <div class="md:col-span-1">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Ending pay rate</label>
                                <input type="text" name="ending_pay" class="form-input">
                            </div>
                            <div class="md:col-span-full">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Address (Street, City, State, Zip)</label>
                                <div class="grid grid-cols-1 sm:grid-cols-4 gap-2">
                                    <input type="text" name="emp_address" placeholder="Address" class="form-input sm:col-span-1" required>
                                    <input type="text" name="emp_city" placeholder="City" class="form-input sm:col-span-1" required>
                                    <input type="text" name="emp_state" placeholder="State" class="form-input sm:col-span-1" required>
                                    <input type="text" name="emp_zip" placeholder="Zip" class="form-input sm:col-span-1" required>
                                </div>
                            </div>
                        </div>
                    </div>
                </template>
            </section>
            
            <!-- Signature Disclaimer Section -->
            <section class="mb-10 p-6 bg-indigo-50 rounded-xl border border-indigo-200">
                <h2 class="text-2xl font-semibold text-indigo-700 border-b pb-2 mb-4 border-indigo-300">Signature Disclaimer</h2>
                <p class="text-sm text-gray-600 mb-4">I certify that my answers are true and complete to the best of my knowledge.</p>
                <p class="text-sm text-gray-600 mb-6">If this application leads to employment, I understand that false or misleading information in my application or interview may result in my employment being terminated.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <!-- Updated label text here -->
                        <label for="print_name" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                        <input type="text" id="print_name" name="print_name" class="form-input" required>
                    </div>
                    <div>
                        <label for="signature" class="block text-sm font-medium text-gray-700 mb-1">Signature (Type your full name)</label>
                        <input type="text" id="signature" name="signature" class="form-input" required>
                    </div>
                    <div>
                        <label for="date_signed" class="block text-sm font-medium text-gray-700 mb-1">Date</label>
                        <input type="date" id="date_signed" name="date_signed" class="form-input" required>
                    </div>
                </div>
            </section>

            <!-- Submit Button and Message Box -->
            <div class="text-center">
                <button type="submit" class="w-full sm:w-auto px-8 py-3 bg-indigo-600 text-white font-bold text-lg rounded-full shadow-lg hover:bg-indigo-700 transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-indigo-500 focus:ring-opacity-50">
                    Submit Application
                </button>
                <div id="message-box" class="mt-6 p-4 text-sm rounded-lg text-left hidden" role="alert"></div>
            </div>

        </form>
    </div>

    <!-- Formsubmit.co and form logic -->
    <script>
        // --- FORMSUBMIT CONFIGURATION ---
        // IMPORTANT: This email is set to receive all form submissions.
        const FORMSUBMIT_EMAIL_ADDRESS = 'rbox1576@gmail.com'; 
        const FORMSUBMIT_URL = `https://formsubmit.co/${FORMSUBMIT_EMAIL_ADDRESS}`;
        
        // Console Log the generated URL for debugging the setup
        console.log(`[FormSubmit Config] Submitting data to: ${FORMSUBMIT_URL}`);
        
        // Check if the email is still the placeholder to warn the user
        let isFormsubmitReady = FORMSUBMIT_EMAIL_ADDRESS !== 'YOUR_EMAIL@EXAMPLE.COM';

        if (!isFormsubmitReady) {
            console.warn("Formsubmit WARNING: Email address not set. Data will NOT be submitted. Please replace 'YOUR_EMAIL@EXAMPLE.COM'.");
        }
        
        /* * IMPORTANT: FormSubmit requires the first submission to be confirmed. 
         * After the first successful submission, you MUST check your inbox (and spam/junk folder)
         * for the confirmation email from FormSubmit and click the link to activate the email address.
         * No future submissions will be received until this step is completed.
         */
        // --- END FORMSUBMIT CONFIGURATION ---


        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('employmentForm');
            const messageBox = document.getElementById('message-box');
            const historyContainer = document.getElementById('employment-history-container');
            const blockTemplate = document.getElementById('employment-block-template');
            // UPDATED: Changed totalBlocks from 3 to 2 to remove the third employer section.
            const totalBlocks = 2; 

            // Function to generate the employment history blocks based on the template (unchanged)
            function generateEmploymentBlocks() {
                for (let i = 1; i <= totalBlocks; i++) {
                    const clone = blockTemplate.content.cloneNode(true);
                    const blockDiv = clone.querySelector('.employment-block');
                    const h3 = clone.querySelector('h3');
                    
                    // Update header text
                    h3.textContent = h3.textContent.replace('[NUMBER]', i);
                    
                    // Update input names for uniqueness
                    blockDiv.querySelectorAll('input').forEach(input => {
                        const originalName = input.getAttribute('name');
                        input.setAttribute('name', `${originalName}_${i}`);
                        
                        if (i > 1 && originalName === 'employer_name') {
                            input.removeAttribute('required');
                        }
                    });

                    historyContainer.appendChild(clone);
                }
            }
            
            generateEmploymentBlocks();
            
            // Function to display a non-alert message
            function displayMessage(text, type = 'submitting') {
                messageBox.textContent = text;
                messageBox.className = 'mt-6 p-4 text-sm rounded-lg text-left';
                messageBox.classList.remove('hidden', 'bg-red-100', 'text-red-800', 'bg-green-100', 'text-green-800', 'bg-indigo-100', 'text-indigo-800');
                
                if (type === 'error') {
                    messageBox.classList.add('bg-red-100', 'text-red-800');
                } else if (type === 'success-final') {
                    // Use green for final confirmation
                    messageBox.classList.add('bg-green-100', 'text-green-800'); 
                } else {
                    // Use a subtle indigo color for 'submitting' status (default)
                    messageBox.classList.add('bg-indigo-100', 'text-indigo-800'); 
                }
            }

            // Handle Form Submission (Updated for AJAX Formsubmit)
            form.addEventListener('submit', async (e) => {
                e.preventDefault(); // Prevent default form submission/navigation

                if (!form.checkValidity()) {
                    displayMessage('Please fill out all required fields.', 'error');
                    form.reportValidity();
                    return;
                }
                
                // --- FORMSUBMIT SUBMISSION LOGIC (AJAX) ---
                if (!isFormsubmitReady) {
                    displayMessage('Data not submitted: Formsubmit email is not configured.', 'error');
                    return;
                }

                displayMessage('Submitting application...', 'submitting'); 
                
                const formData = new FormData(form);
                const data = {};
                for (let [key, value] of formData.entries()) {
                    // Formsubmit requires the _subject field for the email subject line
                    if (key === 'position') {
                        data['_subject'] = `New Application for: ${value}`;
                    }
                    // Include all other fields
                    data[key] = value;
                }

                // Append the Formsubmit required fields
                data['_replyto'] = data.email || 'noreply@example.com'; // Use the applicant's email for replies

                try {
                    // Send data as JSON to the Formsubmit endpoint
                    const response = await fetch(FORMSUBMIT_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });
                    
                    if (response.ok) {
                        // Success: Display success message and reset the form
                        displayMessage('Application submitted successfully! Thank you for your interest.', 'success-final');
                        form.reset(); 
                        
                        // Scroll to the message box
                        messageBox.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        
                    } else {
                        // Formsubmit returns non-OK status on error (e.g., bad request)
                        const errorData = await response.json();
                        console.error('Formsubmit Error:', errorData);
                        displayMessage(`Submission failed. Please check the console for details.`, 'error');
                    }
                } catch (error) {
                    console.error('Network or Fetch Error:', error);
                    displayMessage(`A network error occurred. Please try again.`, 'error');
                }
                // --- END FORMSUBMIT SUBMISSION LOGIC ---
            });
        });
    </script>
</body>
</html>
